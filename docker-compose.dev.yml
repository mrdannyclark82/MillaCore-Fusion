version: "3.8"
services:
  milla-gem:
    image: node:18
    working_dir: /work
    volumes:
      - ./:/work
    command: /bin/sh -c "cd apps/milla-gem && pnpm install && pnpm dev"
    ports:
      - "3001:3000"
    environment:
      - NODE_ENV=development

  gemini-assistant:
    image: node:18
    working_dir: /work
    volumes:
      - ./:/work
    command: /bin/sh -c "cd apps/gemini-assistant && pnpm install && pnpm dev"
    ports:
      - "3002:3000"
    environment:
      - NODE_ENV=development

  proxy:
    image: nginx:stable-alpine
    volumes:
      - ./infra/nginx/dev.conf:/etc/nginx/conf.d/default.conf:ro
    ports:
      - "8080:80"
    depends_on:
      - milla-gem
      - gemini-assistant
